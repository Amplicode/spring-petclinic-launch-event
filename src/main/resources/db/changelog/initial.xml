<?xml version="1.0" encoding="UTF-8"?>
<databaseChangeLog
	xmlns="http://www.liquibase.org/xml/ns/dbchangelog"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.liquibase.org/xml/ns/dbchangelog
                      http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-4.20.xsd"
	objectQuotingStrategy="QUOTE_ONLY_RESERVED_WORDS">
	<changeSet id="1719237171868-2" author="ikuchmin (generated)">
		<createTable tableName="vets">
			<column autoIncrement="true" name="id" type="INTEGER">
				<constraints nullable="false" primaryKey="true" primaryKeyName="vets_pkey"/>
			</column>
			<column name="first_name" type="TEXT"/>
			<column name="last_name" type="TEXT"/>
		</createTable>
	</changeSet>
	<changeSet id="1719237171868-3" author="ikuchmin (generated)">
		<createTable tableName="specialties">
			<column autoIncrement="true" name="id" type="INTEGER">
				<constraints nullable="false" primaryKey="true" primaryKeyName="specialties_pkey"/>
			</column>
			<column name="name" type="TEXT"/>
		</createTable>
	</changeSet>
	<changeSet id="1719237171868-4" author="ikuchmin (generated)">
		<createTable tableName="types">
			<column autoIncrement="true" name="id" type="INTEGER">
				<constraints nullable="false" primaryKey="true" primaryKeyName="types_pkey"/>
			</column>
			<column name="name" type="TEXT"/>
		</createTable>
	</changeSet>
	<changeSet id="1719237171868-5" author="ikuchmin (generated)">
		<createTable tableName="owners">
			<column autoIncrement="true" name="id" type="INTEGER">
				<constraints nullable="false" primaryKey="true" primaryKeyName="owners_pkey"/>
			</column>
			<column name="first_name" type="TEXT"/>
			<column name="last_name" type="TEXT"/>
			<column name="address" type="TEXT"/>
			<column name="city" type="TEXT"/>
			<column name="telephone" type="TEXT"/>
		</createTable>
	</changeSet>
	<changeSet id="1719237171868-6" author="ikuchmin (generated)">
		<createTable tableName="pets">
			<column autoIncrement="true" name="id" type="INTEGER">
				<constraints nullable="false" primaryKey="true" primaryKeyName="pets_pkey"/>
			</column>
			<column name="name" type="TEXT"/>
			<column name="birth_date" type="date"/>
			<column name="type_id" type="INTEGER">
				<constraints nullable="false"/>
			</column>
			<column name="owner_id" type="INTEGER"/>
		</createTable>
	</changeSet>
	<changeSet id="1719237171868-7" author="ikuchmin (generated)">
		<createTable tableName="visits">
			<column autoIncrement="true" name="id" type="INTEGER">
				<constraints nullable="false" primaryKey="true" primaryKeyName="visits_pkey"/>
			</column>
			<column name="pet_id" type="INTEGER"/>
			<column name="visit_date" type="date"/>
			<column name="description" type="TEXT"/>
		</createTable>
	</changeSet>
	<changeSet id="1719237171868-8" author="ikuchmin (generated)">
		<createTable tableName="vet_specialties">
			<column name="vet_id" type="INTEGER">
				<constraints nullable="false"/>
			</column>
			<column name="specialty_id" type="INTEGER">
				<constraints nullable="false"/>
			</column>
		</createTable>
	</changeSet>
	<changeSet id="1719237171868-10" author="ikuchmin (generated)">
		<createIndex indexName="vets_last_name_idx" tableName="vets">
			<column name="last_name"/>
		</createIndex>
	</changeSet>
	<changeSet id="1719237171868-11" author="ikuchmin (generated)">
		<createIndex indexName="specialties_name_idx" tableName="specialties">
			<column name="name"/>
		</createIndex>
	</changeSet>
	<changeSet id="1719237171868-12" author="ikuchmin (generated)">
		<createIndex indexName="types_name_idx" tableName="types">
			<column name="name"/>
		</createIndex>
	</changeSet>
	<changeSet id="1719237171868-13" author="ikuchmin (generated)">
		<createIndex indexName="owners_last_name_idx" tableName="owners">
			<column name="last_name"/>
		</createIndex>
	</changeSet>
	<changeSet id="1719237171868-14" author="ikuchmin (generated)">
		<createIndex indexName="pets_name_idx" tableName="pets">
			<column name="name"/>
		</createIndex>
	</changeSet>
	<changeSet id="1719237171868-15" author="ikuchmin (generated)">
		<createIndex indexName="pets_owner_id_idx" tableName="pets">
			<column name="owner_id"/>
		</createIndex>
	</changeSet>
	<changeSet id="1719237171868-16" author="ikuchmin (generated)">
		<createIndex indexName="visits_pet_id_idx" tableName="visits">
			<column name="pet_id"/>
		</createIndex>
	</changeSet>
	<changeSet id="1719237171868-17" author="ikuchmin (generated)">
		<addUniqueConstraint columnNames="vet_id, specialty_id" constraintName="vet_specialties_vet_id_specialty_id_key"
							 tableName="vet_specialties"/>
	</changeSet>
	<changeSet id="1719237171868-18" author="ikuchmin (generated)">
		<addForeignKeyConstraint baseColumnNames="owner_id" baseTableName="pets" constraintName="pets_owner_id_fkey"
								 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
								 referencedTableName="owners"/>
	</changeSet>
	<changeSet id="1719237171868-19" author="ikuchmin (generated)">
		<addForeignKeyConstraint baseColumnNames="type_id" baseTableName="pets" constraintName="pets_type_id_fkey"
								 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
								 referencedTableName="types"/>
	</changeSet>
	<changeSet id="1719237171868-20" author="ikuchmin (generated)">
		<addForeignKeyConstraint baseColumnNames="specialty_id" baseTableName="vet_specialties"
								 constraintName="vet_specialties_specialty_id_fkey" onDelete="NO ACTION"
								 onUpdate="NO ACTION" referencedColumnNames="id" referencedTableName="specialties"/>
	</changeSet>
	<changeSet id="1719237171868-21" author="ikuchmin (generated)">
		<addForeignKeyConstraint baseColumnNames="vet_id" baseTableName="vet_specialties"
								 constraintName="vet_specialties_vet_id_fkey" onDelete="NO ACTION" onUpdate="NO ACTION"
								 referencedColumnNames="id" referencedTableName="vets"/>
	</changeSet>
	<changeSet id="1719237171868-22" author="ikuchmin (generated)">
		<addForeignKeyConstraint baseColumnNames="pet_id" baseTableName="visits" constraintName="visits_pet_id_fkey"
								 onDelete="NO ACTION" onUpdate="NO ACTION" referencedColumnNames="id"
								 referencedTableName="pets"/>
	</changeSet>

</databaseChangeLog>
